!function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,i=e("./Layout.js"),o=e("./Index.js"),a=e("./Article.js"),r=e("./History.js"),s=location.pathname+location.search;window.currentUrl=s,window.modules={index:o,article:a,layout:i},CSS3.isSupport()&&n("html").addClass("css3");var l=n("#header");l.length&&(i.init({$header:l}),i.setEventGnbFromMobile({selector_toggleButtons:l.find(".toggle-buttons > button"),selector_targetElements:l.find(".gnb, .keyword-search, .profile")}),i.initScrollEventFromHeader());var d=n("#photoIndex");if(d.length){o.initLoading(d.children(".loading-wrap")),o.setMasonry({masonryOption:{itemSelector:".grid-item",columnWidth:".grid-sizer",transitionDuration:"0s",hiddenStyle:{},visibleStyle:{}},delay:100,showClassName:"show",$grid:d.children(".index")});var u=d.children(".more-item");userData.preference.index.print_moreitem&&u.length&&(o.isPaginate=!0,o.loadMoreItems(u.children("button")));var c=d.children(".paginate");userData.preference.index.print_paginate&&c.length&&(o.isNextpage=!0,o.$paginate=c,o.initPaginateEvent(o.$paginate.find("a"))),r.replace({target:"index",url:s},s,s)}var f=n("#article");f.length&&(a.init(f),r.replace({target:"article",url:s},s,s)),r.initPopEvent({article:a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Article.js":2,"./History.js":3,"./Index.js":4,"./Layout.js":5}],2:[function(e,t,n){(function(n){"use strict";var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=e("./Loading.js"),a=e("./History.js");t.exports={$body:null,$modal:null,scrollTop:0,isModal:!1,saveURL:"",loading:new o,actResize:!1,keyboardEvent:{self:null,init:function(e){this.self=e},on:function(){var e=this.self,t=e.$body.find(".external-buttons a.btn");i(window).on("keyup.article",function(n){switch(n.keyCode){case 27:e.onClose();break;case 37:e.onGo(t.filter(".prev").get(0));break;case 39:e.onGo(t.filter(".next").get(0))}})},off:function(){i(window).off("keyup.article")}},getCookie:function(e){e+="=";var t=document.cookie,n=t.indexOf(e),i="";if(-1!=n){n+=e.length;var o=t.indexOf(";",n);-1==o&&(o=t.length),i=t.substring(n,o)}return i},setCookie:function(e,t,n){var i=new Date,o=e+"="+t+"; path=/ ";i.setDate(i.getDate()+n),o+="undefined"!=typeof n?";expires="+i.toGMTString()+";":"",document.cookie=o},init:function(e){return e&&e.length?(this.$body=e,this.initButtonsEvent(),this.keyboardEvent.init(this),this.keyboardEvent.on(),void this.initResizeEvent()):!1},onLike:function(e){var t=e.currentTarget,n=parseInt(t.getAttribute("data-srl"),10),o=userData.environment.root+"/ajax/upLike/"+n+"/";jQuery.ajax({url:o,method:"get",dataType:"json",headers:{Accept:"application="+userData.preference.meta.headerKey+";"}}).done(function(e){if("success"==e.state){var n=modules.article.$body.find("[data-bind=like]"),o=parseInt(n.text(),10);n.text(o+1),i(t).prop("disabled",!0)}else log("db error"),log(e)}).fail(function(e){log("server error"),log(e.responseText)})},initButtonsEvent:function(){var e=this;if(this.$body.find(".nav-bottom > .like").on("click",this.onLike),this.isModal){var t=this.$body.find(".external-buttons .btn");t.filter(".close").on("click",function(){return e.onClose(),!1}),t.filter("a.prev,a.next").on("click",function(t){return e.onGo(t.currentTarget),!1})}},initResizeEvent:function(){var e=this;return this.isModal?(this.actResize=!1,void i(window).one("resize.article",function(){e.actResize=!0})):!1},modalTemplate:function(){return'<div class="modal animate fixed"><span class="bg"></span><div class="wrap"></div></div>'},open:function(e){var t=this;return e?(this.isModal=!0,this.scrollTop=i(window).scrollTop(),this.$modal=i(this.modalTemplate()),i("body").append(this.$modal),this.get="",userData.environment.params.nest?(this.get="&get=nest",this.get+=userData.environment.params.category?",category":""):this.get="&get=all",setTimeout(function(){t.$modal.addClass("show")},30),CSS3.transitionEnd(this.$modal.get(0),function(n){i("html").addClass("mode-modal"),t.$modal.removeClass("fixed animate show"),t.loading.show(),t.$modal.children(".wrap").load(e+"?popup=1"+t.get,function(e){t.loading.hide(),t.init(t.$modal.find("> .wrap > .article"))})}),this.saveURL=location.pathname+location.search,window.currentUrl=e,void window.modules.layout.destroyScrollEventFromHeader()):!1},onClose:function(){if(this.isModal)a.push({target:"index",url:this.saveURL},this.saveURL,this.saveURL),this.close();else{var e=this.$body.find(".external-buttons .close").attr("href");a.push({target:"index",url:e},e,e),location.href=e}},close:function(){var e=this;if(!this.isModal)return!1;var t=i(window).scrollTop();this.keyboardEvent.off(),this.isModal=!1,this.$modal.addClass("fixed animate show"),this.$modal.children(".wrap").scrollTop(t),setTimeout(function(){i("html").removeClass("mode-modal").addClass("hidden-scroll"),i(window).scrollTop(e.scrollTop),e.$modal.removeClass("show"),window.modules.index.refreshMasonry(),window.currentUrl=e.saveURL},30),CSS3.transitionEnd(this.$modal.get(0),function(t){i("html").removeClass("hidden-scroll"),e.$modal.remove(),e.$modal=null,e.$body=null,e.scrollTop=0,window.modules.layout.initScrollEventFromHeader()})},onGo:function(e){if(!e)return!1;var t=e.getAttribute("href");a.push({target:"article",url:t},t,t),this.isModal?this.go(t):location.reload()},go:function(e){var t=this,n=this.$modal.children(".wrap");this.keyboardEvent.off(),n.html(""),this.loading.show(),n.load(e+"?popup=1"+this.get,function(){t.loading.hide(),t.init(t.$modal.find("> .wrap > .article"))}),window.currentUrl=e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./History.js":3,"./Loading.js":6}],3:[function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null;t.exports={article:null,support:function(){return history.pushState?!0:!1},push:function(e,t,n){return this.support()&&n?void history.pushState(e||null,t||n,n):!1},replace:function(e,t,n){return this.support()&&n?void history.replaceState(e||null,t||n,n):!1},initPopEvent:function(e){var t=this,i=this;this.article=e.article,n(window).on("popstate",function(e){var n=e.originalEvent.state;if(n&&window.currentUrl!=n.url){switch(n.target){case"index":if(i.article.isModal)return i.article.close(),!1;break;case"article":return t.article.isModal?(i.article.go(n.url),!1):(i.article.open(n.url),!1)}location.reload()}})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(n){"use strict";var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=("undefined"!=typeof window?window.Masonry:"undefined"!=typeof n?n.Masonry:null,"undefined"!=typeof window?window.imagesLoaded:"undefined"!=typeof n?n.imagesLoaded:null,e("./Loading.js")),a=e("./Article.js"),r=e("./History.js"),s=null;t.exports={$grid:null,$paginate:null,$loading:null,$moreItem:null,masonryOption:{},masonryDelay:0,showClassName:"show",isPaginate:!1,isNextpage:!1,initLoading:function(e){this.$loading=e,s=new o},setMasonry:function(e){var t=this;if(!e.$grid)return!1;this.$grid=e.$grid||null,this.masonryDelay=e.delay||this.masonryDelay,this.masonryOption=e.masonryOption||this.masonryOption,this.showClassName=e.showClassName||this.showClassName;var n=this.$grid.children(this.masonryOption.itemSelector);s.show(this.$loading),n.imagesLoaded(function(i){s.hide(),t.$grid.addClass("show"),t.$grid.masonry(e.masonryOption),t.masonryDelay>0&&(t.playGridItem(n,t.masonryDelay,t.showClassName),t.gotoArticle(n))})},destroyMasonry:function(){this.$grid.masonry("destroy"),this.$grid.children(".grid-item").remove()},refreshMasonry:function(){this.$grid.masonry("layout")},playGridItem:function(e,t,n){e.each(function(e,o){setTimeout(function(){i(o).addClass(n)},e*t)})},template:function(e){var t=userData.environment;return e.map(function(e,n){var i=t.root+"/article/"+e.srl+"/",o=t.gooseRoot+"/"+e.json.thumnail.url;return'<div class="grid-item"><a href="'+i+'"><figure><img src="'+o+'" alt="'+e.title+'"></figure><strong>'+e.title+'</strong><div class="meta"><span><i class="fa fa-eye"></i><em>'+e.hit+'</em></span><span><i class="fa fa-heart"></i><em>'+(e.json.like?e.json.like:0)+"</em></span></div></a></div>"}).join("")},addItems:function(e,t){var n=userData.environment,o=n.root+"/ajax/",a="";o+=e.nest?"index/"+e.nest+"/":n.params.nest?"index/"+n.params.nest+"/":"",o+=e.category?e.category+"/":n.params.category?n.params.category+"/":"",e.nest||void 0!==e.category||(a+=e.keyword?"&keyword="+e.keyword:n.keyword?"&keyword="+n.keyword:"",a+="&page="+(e.page?e.page:n.page)),a+="&get=",a+=this.isPaginate?"print_paginate,":"",a+=this.isNextpage?"print_moreitem,":"",a=a.replace(/^&/i,"?"),o+=a,i.getJSON(o,function(e){t&&t(e)})},refreshItems:function(e,t,n){var o=this;try{if("success"==e.state)!function(){var a=e.articles.length?i(o.template(e.articles)):null;if(!a||!a.length)throw"not found items";a.imagesLoaded(function(){t||(o.$grid.masonry(o.masonryOption),s.hide()),o.$grid.append(a).masonry("appended",a),o.gotoArticle(a),o.playGridItem(a,o.masonryDelay,o.showClassName),userData.preference.index.print_paginate&&e.pageNavigation&&o.updatePaginate(e.pageNavigation),userData.preference.index.print_moreitem&&(e.nextpage?(o.$moreItem.hasClass("hide")&&o.$moreItem.removeClass("hide"),o.updateMoreItemButton(e.nextpage)):o.$moreItem.addClass("hide")),n&&n()})}();else if("error"==e.state)throw e.message?e.message:"error"}catch(a){alert(a)}},loadMoreItems:function(e){var t=this;this.$moreItem=e,this.$moreItem.on("click",function(e){var n=i(e.currentTarget),o=parseInt(n.attr("data-nextpage"));return n&&n.hasClass("loading")?!1:(n.addClass("loading"),void t.addItems({page:o},function(e){t.refreshItems(e,!0,function(){n.removeClass("loading")}),t.updateURL({page:o})}))})},updateMoreItemButton:function(e){this.$moreItem.attr("data-nextpage",e)},initPaginateEvent:function(e){var t=this;e.on("click",function(e){var n=parseInt(e.currentTarget.getAttribute("data-key"));return t.destroyMasonry(),s.show(t.$loading),t.addItems({page:n},function(e){return e.article&&e.article.length?!1:(t.refreshItems(e,!1),void t.updateURL({page:n}))}),!1})},updatePaginate:function(e){if(!e.body)return!1;var t=(userData.environment.keyword,location.pathname+"?"),n="";e.prev&&(n+='<a href="'+t+e.prev.url+'" title="prev" data-key="'+e.prev.id+'"><i class="fa fa-caret-left"></i></a>'),n+=e.body.map(function(e,n){return e.active?"<strong>"+e.name+"</strong>":'<a href="'+t+e.url+'" data-key="'+e.id+'">'+e.name+"</a>"}).join(""),e.next&&(n+='<a href="'+t+e.next.url+'" title="next" data-key="'+e.next.id+'"><i class="fa fa-caret-right"></i></a>'),this.$paginate.find("a").off("click"),this.$paginate.html(n),this.initPaginateEvent(this.$paginate.find("a"))},gotoArticle:function(e){e.children("a").on("click",function(e){var t=e.currentTarget.getAttribute("href");return a.open(t),r.push({target:"article",url:t},t,t),!1})},updateURL:function(e){if(!r.support())return!1;var t=userData.environment,n="",i="";e.nest?(n+=t.root+"/",n+="index/"+e.nest+"/",n+=e.category?e.category+"/":""):n+=location.pathname,i=t.keyword?"&keyword="+t.keyword:"",i+="&page="+(e.page?e.page:t.page),i=i.replace(/^&/i,"?"),n+=i,window.currentUrl=n,r.push({target:"index",url:n},n,n)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Article.js":2,"./History.js":3,"./Loading.js":6}],5:[function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null;t.exports={$dom:{},init:function(e){this.$dom.header=e.$header},setEventGnbFromMobile:function(e){var t=e.selector_toggleButtons,i=e.selector_targetElements;t.on("click",function(e){var o=n(e.currentTarget),a=o.attr("data-target");o.hasClass("on")?(o.removeClass("on"),i.removeClass("show")):(t.removeClass("on"),i.removeClass("show"),o.addClass("on"),i.filter("."+a).addClass("show"))})},initScrollEventFromHeader:function(){function e(){i.$dom.header.removeClass("hide"),modules.article.$body&&modules.article.$body.children(".external-buttons").removeClass("hide"),r=!1}function t(){i.$dom.header.addClass("hide"),modules.article.$body&&modules.article.$body.children(".external-buttons").addClass("hide"),r=!0}var i=this,o=n(window),a=0,r=!1,s=0;this.$dom.header.removeClass("hide"),o.on("scroll.header",function(n){var i=o.scrollTop();if(i>.3*o.height()){if(a>i){if(r){if(n.timeStamp-s<300)return!1;e()}}else if(!r){if(n.timeStamp-s<100)return!1;t()}}else r&&e();a=i,s=n.timeStamp})},destroyScrollEventFromHeader:function(){n(window).off("scroll.header")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null;t.exports=function(){var e=this;this.$el=null,this.full=!1,this.init=function(t){var i=n(e.template());e.$el=i,e.full&&i.addClass("full"),t.append(i)},this.template=function(){return'<div class="loading"><div class="wrap"><div class="ui-loader"></div><span class="message">loading...</span></div></div>'},this.show=function(t){t=t||n("body"),e.full=t?!0:!1,e.init(t),e.$el.addClass("show")},this.hide=function(){e.$el.removeClass("show"),e.$el.remove(),e.$el=null}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
//# sourceMappingURL=maps/app.pkgd.js.map
